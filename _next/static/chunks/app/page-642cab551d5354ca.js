(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9622:function(o,e,t){Promise.resolve().then(t.bind(t,458))},458:function(o,e,t){"use strict";t.d(e,{default:function(){return C}});var n=t(7437),r=t(2265);class i{constructor(o,e){this.kind=o,this.color=e}}let a=["red","green","blue"];function l(o){return new i(o,"black")}function s(o){return new i(o,"white")}class c{movePiece(o,e,t,n){let r=this.boardconfig[o][e];this.boardconfig[t][n]=r,this.boardconfig[o][e]=null,r&&"king"==r.kind&&("white"==r.color?this.whiteKingPosition={row:t,col:n}:this.blackKingPosition={row:t,col:n}),r&&r.kind}promotePawn(o,e,t){this.boardconfig[o][e]=new i(t,this.boardconfig[o][e].color)}isKingInCheck(o){let e="white"===o?this.whiteKingPosition:this.blackKingPosition;for(let t=0;t<8;t++)for(let n=0;n<8;n++){let r=this.boardconfig[t][n];if(r instanceof i&&r.color!==o&&this.isMoveValid(r,t,n,e.row,e.col))return!0}return!1}constructor(){this.boardconfig=[[l("rook"),l("knight"),l("bishop"),l("queen"),l("king"),l("bishop"),l("knight"),l("rook")],[l("pawn"),l("pawn"),l("pawn"),l("pawn"),l("pawn"),l("pawn"),l("pawn"),l("pawn")],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[s("pawn"),s("pawn"),s("pawn"),s("pawn"),s("pawn"),s("pawn"),s("pawn"),s("pawn")],[s("rook"),s("knight"),s("bishop"),s("queen"),s("king"),s("bishop"),s("knight"),s("rook")]],this.boardcolors=function(){let o=[];for(let e=0;e<4;e++){let e=[];for(let o=0;o<8;o++)e.push(a[Math.floor(Math.random()*a.length)]);o.push(e)}return o.concat(o.slice().reverse())}(),this.whiteKingPosition={row:4,col:7},this.blackKingPosition={row:4,col:0},this.currentColor="",this.isPathClear=(o,e,t,n)=>{let r=t>o?1:-1,i=n>e?1:-1;o===t&&(r=0),e===n&&(i=0);let a=o+r,l=e+i;for(;a!==t||l!==n;){if(this.boardconfig[a][l])return!1;a+=r,l+=i}return!0},this.movesPutKingInCheck=(o,e,t,n,r)=>{let i=new c;return i.boardconfig=this.boardconfig.map(o=>o.slice()),i.movePiece(e,t,n,r),!!i.isKingInCheck(o.color)},this.doesKingExist=o=>{for(let e=0;e<8;e++)for(let t=0;t<8;t++){let n=this.boardconfig[e][t];if(n instanceof i&&"king"===n.kind&&n.color===o)return!0}return!1},this.isCheckmate=o=>{for(let e=0;e<8;e++)for(let t=0;t<8;t++){let n=this.boardconfig[e][t];if(n instanceof i&&n.color===o){for(let o=0;o<8;o++)for(let r=0;r<8;r++)if(this.isMoveValid(n,e,t,o,r)&&!this.movesPutKingInCheck(n,e,t,o,r))return!1}}return!0},this.isStalemate=o=>{for(let e=0;e<8;e++)for(let t=0;t<8;t++){let n=this.boardconfig[e][t];if(n instanceof i&&n.color===o){for(let o=0;o<8;o++)for(let r=0;r<8;r++)if(this.isMoveValid(n,e,t,o,r))return!1}}return!0},this.isMoveValid=(o,e,t,n,r)=>{let a=Math.abs(e-n),l=Math.abs(t-r);if("white"===o.color&&this.boardconfig[n][r]&&"white"===this.boardconfig[n][r].color||"black"===o.color&&this.boardconfig[n][r]&&"black"===this.boardconfig[n][r].color)return!1;switch(o.kind){case"pawn":if("white"===o.color){if(6===e&&4===n&&t===r&&!this.boardconfig[n][r]||1===a&&e>n&&t===r&&!this.boardconfig[n][r])return this.isPathClear(e,t,n,r);if(n===e-1&&1===l&&this.boardconfig[n][r])return!0}if("black"===o.color){if(1===e&&3===n&&t===r&&!this.boardconfig[n][r]||1===a&&e<n&&t===r&&!this.boardconfig[n][r])return this.isPathClear(e,t,n,r);if(n===e+1&&1===l&&this.boardconfig[n][r])return!0}break;case"rook":if(e===n||t===r)return this.isPathClear(e,t,n,r);break;case"knight":if(2===a&&1===l||1===a&&2===l)return!0;break;case"bishop":if(a===l)return this.isPathClear(e,t,n,r);break;case"queen":if(a===l||e===n||t===r)return this.isPathClear(e,t,n,r);break;case"king":if("white"===o.color){if(7===e&&7===n&&4===t&&6===r&&this.boardconfig[7][7]&&"rook"===this.boardconfig[7][7].kind&&"white"===this.boardconfig[7][7].color&&!this.boardconfig[7][5]&&!this.boardconfig[7][6])return this.boardconfig[7][7]=null,this.boardconfig[7][5]=new i("rook","white"),!0;if(7===e&&7===n&&4===t&&2===r&&this.boardconfig[7][0]&&"rook"===this.boardconfig[7][0].kind&&"white"===this.boardconfig[7][0].color&&!this.boardconfig[7][1]&&!this.boardconfig[7][2]&&!this.boardconfig[7][3])return this.boardconfig[7][0]=null,this.boardconfig[7][3]=new i("rook","white"),!0}if("black"===o.color){if(0===e&&0===n&&4===t&&6===r&&this.boardconfig[0][7]&&"rook"===this.boardconfig[0][7].kind&&"black"===this.boardconfig[0][7].color&&!this.boardconfig[0][5]&&!this.boardconfig[0][6])return this.boardconfig[0][7]=null,this.boardconfig[0][5]=new i("rook","black"),!0;if(0===e&&0===n&&4===t&&2===r&&this.boardconfig[0][0]&&"rook"===this.boardconfig[0][0].kind&&"black"===this.boardconfig[0][0].color&&!this.boardconfig[0][1]&&!this.boardconfig[0][2]&&!this.boardconfig[0][3])return this.boardconfig[0][0]=null,this.boardconfig[0][3]=new i("rook","black"),!0}if(a<=1&&l<=1)return!0}}}}var d=t(3145),h=t(6311),f=t(653),u=t(1994),g=t(3335);function b(){for(var o=arguments.length,e=Array(o),t=0;t<o;t++)e[t]=arguments[t];return(0,g.m6)((0,u.W)(e))}let w=h.fC;h.xz;let p=h.h_;h.x8;let k=r.forwardRef((o,e)=>{let{className:t,...r}=o;return(0,n.jsx)(h.aV,{ref:e,className:b("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});k.displayName=h.aV.displayName;let m=r.forwardRef((o,e)=>{let{className:t,children:r,...i}=o;return(0,n.jsxs)(p,{children:[(0,n.jsx)(k,{}),(0,n.jsxs)(h.VY,{ref:e,className:b("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[r,(0,n.jsxs)(h.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(f.Pxu,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=h.VY.displayName;let x=r.forwardRef((o,e)=>{let{className:t,...r}=o;return(0,n.jsx)(h.Dx,{ref:e,className:b("text-lg font-semibold leading-none tracking-tight",t),...r})});x.displayName=h.Dx.displayName,r.forwardRef((o,e)=>{let{className:t,...r}=o;return(0,n.jsx)(h.dk,{ref:e,className:b("text-sm text-muted-foreground",t),...r})}).displayName=h.dk.displayName;var N=o=>{let{isOpen:e,onClose:t,promotePawn:r}=o;return(0,n.jsx)(w,{open:e,onOpenChange:t,children:(0,n.jsxs)(m,{children:[(0,n.jsx)(x,{className:"text-lg font-semibold mb-4 justify-center place-self-center text-white",children:"Select a Piece for Promotion"}),(0,n.jsxs)("div",{className:"flex space-x-4 justify-center items-center",children:[(0,n.jsx)("button",{onClick:()=>r("queen"),className:"p-2 bg-gray-300 hover:bg-gray-400",children:"Queen"}),(0,n.jsx)("button",{onClick:()=>r("rook"),className:"p-2 bg-gray-300 hover:bg-gray-400",children:"Rook"}),(0,n.jsx)("button",{onClick:()=>r("bishop"),className:"p-2 bg-gray-300 hover:bg-gray-400",children:"Bishop"}),(0,n.jsx)("button",{onClick:()=>r("knight"),className:"p-2 bg-gray-300 hover:bg-gray-400",children:"Knight"})]})]})})},v=t(6255);let j=r.forwardRef((o,e)=>{let{className:t,children:r,...i}=o;return(0,n.jsxs)(v.fC,{ref:e,className:b("relative overflow-hidden",t),...i,children:[(0,n.jsx)(v.l_,{className:"h-full w-full rounded-[inherit]",children:r}),(0,n.jsx)(y,{}),(0,n.jsx)(v.Ns,{})]})});j.displayName=v.fC.displayName;let y=r.forwardRef((o,e)=>{let{className:t,orientation:r="vertical",...i}=o;return(0,n.jsx)(v.gb,{ref:e,orientation:r,className:b("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...i,children:(0,n.jsx)(v.q4,{className:"relative flex-1 rounded-full bg-border"})})});function C(){let[o,e]=(0,r.useState)(new c),[t,i]=(0,r.useState)(null),[a,l]=(0,r.useState)("white"),[s,h]=(0,r.useState)(!1),[f,u]=(0,r.useState)(null),[g,b]=(0,r.useState)([]),[w,p]=(0,r.useState)(!1),[k,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{m(!0)},[]);let x=(n,r)=>{console.log(o.boardcolors[n][r]);let s=o.boardconfig[n][r];if(t){let d=o.boardconfig[t.row][t.col];d&&o.isMoveValid(d,t.row,t.col,n,r)&&(w?w&&o.currentColor===o.boardcolors[n][r]&&(o.movePiece(t.row,t.col,n,r),b([...g,"".concat(d.color," ").concat(d.kind," moved from ").concat(t.row,",").concat(t.col," to ").concat(n,",").concat(r)]),"pawn"===d.kind&&(0===n||7===n)&&(h(!0),u({row:n,col:r})),p(!1)):(o.movePiece(t.row,t.col,n,r),b([...g,"".concat(d.color," ").concat(d.kind," moved from ").concat(t.row,",").concat(t.col," to ").concat(n,",").concat(r)]),l("white"===a?"black":"white"),"pawn"===d.kind&&(0===n||7===n)&&(h(!0),u({row:n,col:r})),o.currentColor="".concat(o.boardcolors[n][r]),console.log(o.boardcolors[n][r]),p(!0)),o.doesKingExist("white"===a?"black":"white")||(b([...g,"".concat(a," wins")]),alert("".concat(a," wins")),e(new c),l("white"),b([]),p(!1))),t.row===n&&t.col===r?i(null):s&&s.color===a?i({row:n,col:r}):i(null)}else s&&s.color===a?i({row:n,col:r}):i(null)};return(0,n.jsxs)("div",{className:"flex justify-center items-center h-screen",children:[(0,n.jsxs)("div",{className:"w-[600px] h-[600px] grid grid-rows-8 grid-cols-8 shadow-2xl",children:[(()=>{let e=[];for(let r=0;r<8;r++)for(let i=0;i<8;i++){let a=k?o.boardcolors[r][i]:"gray",l=o.boardconfig[r][i],s=(null==t?void 0:t.row)===r&&(null==t?void 0:t.col)===i;e.push((0,n.jsx)("div",{className:"w-[75px] h-[75px]  \n                        ".concat(s?"border-2 border-yellow-500":"border-2 border-gray-700"),style:{backgroundColor:a},onClick:()=>x(r,i),children:l&&(0,n.jsx)(d.default,{src:"/pieces/".concat(l.color,"_").concat(l.kind,".png"),width:75,height:75,alt:"chess piece"})},"".concat(r,"-").concat(i)))}return e})(),(0,n.jsx)(N,{isOpen:s,onClose:()=>h(!1),promotePawn:e=>{f&&(o.promotePawn(f.row,f.col,e),h(!1),u(null),b([...g,"".concat("white"===a?"black":"white"," pawn promoted to ").concat(e)]))}})]}),(0,n.jsxs)(j,{className:"h-[600px] w-[250px] rounded-md border p-4 shadow-md bg-card text-card-foreground text-white",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Game Log"}),(0,n.jsx)("div",{className:"text-sm",children:g.map((o,e)=>(0,n.jsx)("div",{children:o},e))})]})]})}y.displayName=v.gb.displayName}},function(o){o.O(0,[310,812,971,117,744],function(){return o(o.s=9622)}),_N_E=o.O()}]);